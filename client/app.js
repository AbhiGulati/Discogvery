var app = angular.module('music', ['music.services'])

.controller('search', function ($scope, APICalls) {
  $scope.similarArtists = {left:[], right:[]};
  var sample = JSON.parse('[{"name":"Thom Yorke","mbid":"8ed2e0b3-aa4c-4e13-bec3-dc7393ed4d6b","match":"1","url":"www.last.fm/music/Thom+Yorke","image":[{"#text":"http://userserve-ak.last.fm/serve/34/16916957.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/16916957.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/16916957.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/16916957.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/16916957/Thom+Yorke.jpg","size":"mega"}],"streamable":"0"},{"name":"Atoms for Peace","mbid":"9e299bee-d7e2-49f3-8cd7-d6b28ab204d1","match":"0.699154","url":"www.last.fm/music/Atoms+for+Peace","image":[{"#text":"http://userserve-ak.last.fm/serve/34/90676581.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/90676581.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/90676581.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/90676581.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/90676581/Atoms+for+Peace+AFP_PNG_180613_01.png","size":"mega"}],"streamable":"0"},{"name":"Jonny Greenwood","mbid":"e9fcfbbf-1743-4f73-8744-ada8da7394ea","match":"0.349122","url":"www.last.fm/music/Jonny+Greenwood","image":[{"#text":"http://userserve-ak.last.fm/serve/34/39672751.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/39672751.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/39672751.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/39672751.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/39672751/Jonny+Greenwood+mr+jonny+god+greenwood.jpg","size":"mega"}],"streamable":"0"},{"name":"Portishead","mbid":"17e0ef75-fae9-4fa3-b6f6-39a8c986d686","match":"0.257012","url":"www.last.fm/music/Portishead","image":[{"#text":"http://userserve-ak.last.fm/serve/34/62829753.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/62829753.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/62829753.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/62829753.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/62829753/Portishead+Beth+and+Geoff.png","size":"mega"}],"streamable":"0"},{"name":"Sigur Rós","mbid":"f6f2326f-6b25-4170-b89d-e235b25508e8","match":"0.245079","url":"www.last.fm/music/Sigur+R%C3%B3s","image":[{"#text":"http://userserve-ak.last.fm/serve/34/382318.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/382318.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/382318.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/382318.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/382318/Sigur+Rs.jpg","size":"mega"}],"streamable":"0"},{"name":"Blur","mbid":"ba853904-ae25-4ebb-89d6-c44cfbd71bd2","match":"0.212162","url":"www.last.fm/music/Blur","image":[{"#text":"http://userserve-ak.last.fm/serve/34/104121989.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/104121989.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/104121989.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/104121989.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/104121989/Blur+tumblr_nm1as0ASqF1rbitzio1_128.jpg","size":"mega"}],"streamable":"0"},{"name":"Muse","mbid":"1695c115-bf3f-4014-9966-2b0c50179193","match":"0.203873","url":"www.last.fm/music/Muse","image":[{"#text":"http://userserve-ak.last.fm/serve/34/35147389.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/35147389.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/35147389.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/35147389.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/35147389/Muse+++The+Resistance+era.jpg","size":"mega"}],"streamable":"0"},{"name":"Joy Division","mbid":"9a58fda3-f4ed-4080-a3a5-f457aac9fcdd","match":"0.185297","url":"www.last.fm/music/Joy+Division","image":[{"#text":"http://userserve-ak.last.fm/serve/34/58555285.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/58555285.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/58555285.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/58555285.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/58555285/Joy+Division+unknown+pleasures.jpg","size":"mega"}],"streamable":"0"},{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","match":"0.183331","url":"www.last.fm/music/Arcade+Fire","image":[{"#text":"http://userserve-ak.last.fm/serve/34/160683.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/160683.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/160683.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/160683.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/160683/Arcade+Fire.jpg","size":"mega"}],"streamable":"0"},{"name":"Philip Selway","mbid":"4ab74d13-d1eb-4895-b874-6da5d8b1aac3","match":"0.177437","url":"www.last.fm/music/Philip+Selway","image":[{"#text":"http://userserve-ak.last.fm/serve/34/48609399.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/48609399.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/48609399.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/48609399.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/48609399/Philip+Selway+trip.jpg","size":"mega"}],"streamable":"0"},{"name":"Massive Attack","mbid":"10adbe5e-a2c0-4bf3-8249-2b4cbf6e6ca8","match":"0.171882","url":"www.last.fm/music/Massive+Attack","image":[{"#text":"http://userserve-ak.last.fm/serve/34/168065.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/168065.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/168065.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/168065.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/168065/Massive+Attack.jpg","size":"mega"}],"streamable":"0"},{"name":"Placebo","mbid":"81b9963b-7ff7-47f7-9afb-fe454d8db43c","match":"0.154251","url":"www.last.fm/music/Placebo","image":[{"#text":"http://userserve-ak.last.fm/serve/34/160706.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/160706.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/160706.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/160706.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/160706/Placebo.jpg","size":"mega"}],"streamable":"0"},{"name":"Pink Floyd","mbid":"83d91898-7763-47d7-b03b-b92132375c47","match":"0.151024","url":"www.last.fm/music/Pink+Floyd","image":[{"#text":"http://userserve-ak.last.fm/serve/34/70948710.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/70948710.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/70948710.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/70948710.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/70948710/Pink+Floyd.png","size":"mega"}],"streamable":"0"},{"name":"Interpol","mbid":"b23e8a63-8f47-4882-b55b-df2c92ef400e","match":"0.146319","url":"www.last.fm/music/Interpol","image":[{"#text":"http://userserve-ak.last.fm/serve/34/355042.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/355042.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/355042.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/355042.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/355042/Interpol.jpg","size":"mega"}],"streamable":"0"},{"name":"Coldplay","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","match":"0.144535","url":"www.last.fm/music/Coldplay","image":[{"#text":"http://userserve-ak.last.fm/serve/34/103862841.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/103862841.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/103862841.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/103862841.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/103862841/Coldplay+++Oceans.png","size":"mega"}],"streamable":"0"},{"name":"Gorillaz","mbid":"e21857d5-3256-4547-afb3-4b6ded592596","match":"0.142267","url":"www.last.fm/music/Gorillaz","image":[{"#text":"http://userserve-ak.last.fm/serve/34/45388159.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/45388159.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/45388159.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/45388159.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/45388159/Gorillaz+PNG.png","size":"mega"}],"streamable":"0"},{"name":"Björk","mbid":"87c5dedd-371d-4a53-9f7f-80522fb7f3cb","match":"0.140904","url":"www.last.fm/music/Bj%C3%B6rk","image":[{"#text":"http://userserve-ak.last.fm/serve/34/88225665.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/88225665.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/88225665.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/88225665.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/88225665/Bjrk+Bjork+by+ellen+von+unwerth+vog.png","size":"mega"}],"streamable":"0"},{"name":"The Smiths","mbid":"40f5d9e4-2de7-4f2d-ad41-e31a9a9fea27","match":"0.140735","url":"www.last.fm/music/The+Smiths","image":[{"#text":"http://userserve-ak.last.fm/serve/34/9933.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/9933.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/9933.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/9933.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/9933/The+Smiths.jpg","size":"mega"}],"streamable":"0"},{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","match":"0.140643","url":"www.last.fm/music/The+National","image":[{"#text":"http://userserve-ak.last.fm/serve/34/67659052.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/67659052.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/67659052.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/67659052.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/67659052/The+National.png","size":"mega"}],"streamable":"0"},{"name":"Grizzly Bear","mbid":"59a7fbcb-ff74-494d-abd0-9c82359040c9","match":"0.139943","url":"www.last.fm/music/Grizzly+Bear","image":[{"#text":"http://userserve-ak.last.fm/serve/34/28235497.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/28235497.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/28235497.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/28235497.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/28235497/Grizzly+Bear+Picture+6.png","size":"mega"}],"streamable":"0"},{"name":"Tame Impala","mbid":"63aa26c3-d59b-4da4-84ac-716b54f1ef4d","match":"0.13967","url":"www.last.fm/music/Tame+Impala","image":[{"#text":"http://userserve-ak.last.fm/serve/34/104311815.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/104311815.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/104311815.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/104311815.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/104311815/Tame+Impala+Coachella.png","size":"mega"}],"streamable":"0"},{"name":"Nirvana","mbid":"5b11f4ce-a62d-471e-81fc-a69a8278c7da","match":"0.136627","url":"www.last.fm/music/Nirvana","image":[{"#text":"http://userserve-ak.last.fm/serve/34/94472221.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/94472221.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/94472221.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/94472221.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/94472221/Nirvana+Optimized+PNG.png","size":"mega"}],"streamable":"0"},{"name":"The Beatles","mbid":"b10bbbfc-cf9e-42e0-be17-e2c3e1d2600d","match":"0.132152","url":"www.last.fm/music/The+Beatles","image":[{"#text":"http://userserve-ak.last.fm/serve/34/125272.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/125272.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/125272.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/125272.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/125272/The+Beatles.jpg","size":"mega"}],"streamable":"0"},{"name":"My Bloody Valentine","mbid":"8ca01f46-53ac-4af2-8516-55a909c0905e","match":"0.131038","url":"www.last.fm/music/My+Bloody+Valentine","image":[{"#text":"http://userserve-ak.last.fm/serve/34/90407619.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/90407619.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/90407619.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/90407619.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/90407619/My+Bloody+Valentine+++Live.jpg","size":"mega"}],"streamable":"0"},{"name":"The Strokes","mbid":"f181961b-20f7-459e-89de-920ef03c7ed0","match":"0.12279","url":"www.last.fm/music/The+Strokes","image":[{"#text":"http://userserve-ak.last.fm/serve/34/142665.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/142665.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/142665.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/142665.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/142665/The+Strokes.jpg","size":"mega"}],"streamable":"0"},{"name":"MGMT","mbid":"50e6288e-3db5-4253-ae51-5e8738ef2c31","match":"0.119596","url":"www.last.fm/music/MGMT","image":[{"#text":"http://userserve-ak.last.fm/serve/34/5383704.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/5383704.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/5383704.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/5383704.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/5383704/MGMT.jpg","size":"mega"}],"streamable":"0"},{"name":"Pixies","mbid":"b6b2bb8d-54a9-491f-9607-7b546023b433","match":"0.11759","url":"www.last.fm/music/Pixies","image":[{"#text":"http://userserve-ak.last.fm/serve/34/326915.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/326915.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/326915.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/326915.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/326915/Pixies.jpg","size":"mega"}],"streamable":"0"},{"name":"Oasis","mbid":"39ab1aed-75e0-4140-bd47-540276886b60","match":"0.116895","url":"www.last.fm/music/Oasis","image":[{"#text":"http://userserve-ak.last.fm/serve/34/100877749.png","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/100877749.png","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/100877749.png","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/100877749.png","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/500/100877749/Oasis++1+PNG.png","size":"mega"}],"streamable":"0"},{"name":"Beck","mbid":"1cc5adcd-1422-4b5c-a3cd-3ecd4f43f506","match":"0.115369","url":"www.last.fm/music/Beck","image":[{"#text":"http://userserve-ak.last.fm/serve/34/5831155.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/5831155.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/5831155.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/5831155.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/5831155/Beck.jpg","size":"mega"}],"streamable":"0"},{"name":"Neutral Milk Hotel","mbid":"a506f761-2c22-4b2f-8a94-bd748c2c8f75","match":"0.112453","url":"www.last.fm/music/Neutral+Milk+Hotel","image":[{"#text":"http://userserve-ak.last.fm/serve/34/57805085.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/57805085.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/57805085.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/57805085.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/57805085/Neutral+Milk+Hotel.jpg","size":"mega"}],"streamable":"0"},{"name":"The Smashing Pumpkins","mbid":"2b42ec56-6785-4ed8-b3cb-190f750111bb","match":"0.103797","url":"www.last.fm/music/The+Smashing+Pumpkins","image":[{"#text":"http://userserve-ak.last.fm/serve/34/299075.jpg","size":"small"},{"#text":"http://userserve-ak.last.fm/serve/64/299075.jpg","size":"medium"},{"#text":"http://userserve-ak.last.fm/serve/126/299075.jpg","size":"large"},{"#text":"http://userserve-ak.last.fm/serve/252/299075.jpg","size":"extralarge"},{"#text":"http://userserve-ak.last.fm/serve/_/299075/The+Smashing+Pumpkins.jpg","size":"mega"}],"streamable":"0"}]');
  $scope.displayArtists = {left:sample, right:sample.slice()};



  $scope.getSimilar = function(artist, side) {
    if(side === 'left' || side === 'right') {
      artist = artist ||
        side === 'left' ? 'Radiohead' : 'The Beatles';
      APICalls.getSimilar(artist)
      .then(function (result) {
        $scope.similarArtists[side] = result.data.similarartists.artist;
        $scope.displayArtists[side] = $scope.similarArtists[side].slice(0,20);
        //console.log(JSON.stringify(result.data.similarartists.artist));
      });
    } else {
      console.log("invalid input for 'side'");
    }
  }

  $scope.getSimilarBoth = function() {
    $scope.getSimilar($scope.artist1, 'left');
    $scope.getSimilar($scope.artist2, 'right');
  }
});

app.directive('backImg', function(){
    return function(scope, element, attrs){
        attrs.$observe('backImg', function(value) {
            element.css({
                'background-image': 'url(' + value +')',
                'background-size' : 'cover'
            });
        });
    };
});